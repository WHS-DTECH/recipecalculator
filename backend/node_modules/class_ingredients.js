// Demo data for Class Ingredients page
// const recipes = {
//   'Fajitas': [
//     '1/2 lime',
//     '1/2 green chilli',
//     '1.0 clove garlic',
//     '1 x 15ml spoon coriander',
//     '1 x 10ml spoon oil',
//     '1.0 small chicken breast (or 3-4 boneless thighs or vegetarian substitute eg quorn)',
//     '1/2 onion',
//     '1/2 green pepper',
//     '2.0 tortillas 2 tortillas',
//     '1.0 tomato 1 tomato',
//     '25.0 Cheddar cheese',
//     '1 x 15ml spoon guacamole (or salsa), optional'
//   ],
//   'Apple and Sultana Crumble': [
//     '80.0 plain flour',
//     '60.0 butter or margarine',
//     '40.0 oats 40g oats',
//     '30.0 brown or white sugar',
//     '2.0 eating apples',
//     '50.0 sultanas 50g sultanas'
//   ],
//   'Pizza': [
//     '200g flour',
//     '1 tsp yeast',
//     '100ml water',
//     '1 tbsp olive oil',
//     '50g cheese',
//     '50g tomato sauce'
//   ]
// };

// const scheduled = [
//   {date: '2026-01-20', period: 3, staff: 'Rs - Reeves, Adrienne', class: 'VEHOME', recipe: 'Vegetable Couscous', servings: 24},
//   {date: '2026-01-19', period: 1, staff: 'HM - McKee, Holly', class: 'WHANAU', recipe: 'Apple and Sultana Crumble', servings: 24},
//   {date: '2026-01-16', period: 1, staff: 'Dk - Diplock, Maryke', class: 'MEET', recipe: 'Chocolate Chip Cookies', servings: 12},
//   {date: '2026-01-16', period: 2, staff: 'VP - Pringle, Vanessa', class: '100COMP', recipe: 'Pizza', servings: 24},
//   {date: '2026-01-16', period: 3, staff: 'VP - Pringle, Vanessa', class: 'SRREAD', recipe: 'Mini Carrot Cakes', servings: 24},
//   {date: '2026-01-15', period: 3, staff: 'VP - Pringle, Vanessa', class: '100COMP', recipe: 'Apple and Sultana Crumble', servings: 24}
// ];

function renderOriginalIngredients(recipes = {}) {
  const recipe = document.getElementById('recipeSelect').value;
  const list = document.getElementById('originalIngredients');
  if (!recipes[recipe] || !recipes[recipe].length) {
    list.innerHTML = '<li class="text-muted">No ingredients found.</li>';
    return;
  }
  list.innerHTML = recipes[recipe].map(i => `<li>${i}</li>`).join('');
}

function renderCalculatedIngredients(recipes = {}) {
  const recipe = document.getElementById('recipeSelect').value;
  const servings = parseInt(document.getElementById('servingsInput').value) || 1;
  const list = document.getElementById('calculatedIngredients');
  if (!recipes[recipe] || !recipes[recipe].length) {
    list.innerHTML = '<li class="text-muted">No ingredients found.</li>';
    return;
  }
  list.innerHTML = recipes[recipe].map(i => `<li>${servings} ${i}</li>`).join('');
}

function renderScheduledBookings(scheduled = []) {
  const tbody = document.getElementById('scheduledBookings');
  if (!scheduled.length) {
    tbody.innerHTML = '<tr><td colspan="7" class="text-muted">No bookings found.</td></tr>';
    return;
  }
  tbody.innerHTML = scheduled.map(b => `<tr><td>${b.date}</td><td>${b.period}</td><td>${b.staff}</td><td>${b.class}</td><td>${b.recipe}</td><td>${b.servings}</td><td><button class='delete-btn'>Delete</button></td></tr>`).join('');
}

// --- Backend Integration Required ---
// Remove demo data. Fetch recipes and scheduled bookings from backend API when available.
// Example fetch (to be implemented):
// fetch('/api/class-ingredients').then(res => res.json()).then(data => { renderOriginalIngredients(data.recipes); renderScheduledBookings(data.scheduled); });

document.getElementById('recipeSelect').addEventListener('change', () => {
  renderOriginalIngredients();
  renderCalculatedIngredients();
});
document.getElementById('servingsInput').addEventListener('input', renderCalculatedIngredients);
document.getElementById('calcBtn').addEventListener('click', renderCalculatedIngredients);

// Example usage (to be replaced with real data):
// renderOriginalIngredients({});
// renderScheduledBookings([]);
